angular.module("webapp",["ngRoute","restangular","ui.bootstrap"]).config(["$routeProvider","RestangularProvider",function(e,t){e.when("/",{templateUrl:"home/home.html",controller:"HomeCtrl"}).when("/forms",{templateUrl:"forms/forms.html",controller:"FormsCtrl"}).when("/dialogs",{templateUrl:"dialogs/dialogs.html",controller:"DialogsCtrl"}).when("/tables",{templateUrl:"tables/tables.html",controller:"TablesCtrl"}).when("/mongodb",{templateUrl:"mongodb/mongodb.html",controller:"MongodbCtrl"}).when("/passport",{templateUrl:"passport/passport.html",controller:"PassportCtrl"}).when("/about",{templateUrl:"about/about.html"}).otherwise({redirectTo:"/"}),t.setResponseExtractor(function(e){return e.payload}),t.setRestangularFields({id:"_id"})}]),angular.module("webapp").controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(e,t,n){e.items=n,e.selected={item:e.items[0]},e.ok=function(){t.close(e.selected.item)},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("webapp").controller("DialogsCtrl",["$scope","alertService","$modal",function(e,t,n){e.success=function(e){t.success(e)},e.info=function(e){t.info(e)},e.warning=function(e){t.warning(e)},e.error=function(e){t.error(e)},e.items=["Chuck Norris","Jean Claude Van Damme","Bruce Willis","Arnold Schwarzenegger"],e.selected=e.items[0],e.open=function(){var t=n.open({templateUrl:"myModalContent",controller:"ModalInstanceCtrl",resolve:{items:function(){return e.items}}});t.result.then(function(t){e.selected=t})}}]),angular.module("webapp").controller("FormsCtrl",["$scope","$http",function(e,t){e.birthDate=new Date(1975,0,29),e.firstName="Thomas",e.lastName="Haukland",e.email="thomas.haukland@gmail.com",e.sex="male",e.possibleInterests=["soccer","billiards","ping pong","tv","bridge","running","junk food"],e.selectedInterests={},e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!0},e.format="yyyy-MM-dd",t.get("/api/backgrounds").success(function(t){e.backgrounds=t}),window.data=e,e.$watch("selectedBackground",function(e){e&&$("html").css("background-image","url(/assets/img/backgrounds/"+e+")")})}]),angular.module("webapp").controller("HomeCtrl",["$scope","$http",function(e,t){function n(e){var t=[];if(e)for(var n in e)t.push({name:n,value:e[n]});return t}t.get("home/package.json").success(function(t){t.dependencies=n(t.dependencies),t.devDependencies=n(t.devDependencies),e.server=t}),t.get("home/bower.json").success(function(t){t.dependencies=n(t.dependencies),t.devDependencies=n(t.devDependencies),e.client=t})}]),angular.module("webapp").factory("alertService",[function(){var e={};return e.success=toastr.success,e.info=toastr.info,e.warning=toastr.warning,e.error=toastr.error,e}]),angular.module("webapp").factory("authService",["$http",function(e){var t={},n=e.get("/auth/account");return t.getAccount=function(e){n.then(function(t){e(t.data)})},t.logout=function(t){e.get("/auth/logout").then(function(){n=e.get("/auth/account"),t()})},t}]),angular.module("webapp").directive("datatables",function(){return function(e,t,n){var a={bStateSave:!1,bJQueryUI:!1,bPaginate:!0,bLengthChange:!0,bFilter:!0,bInfo:!0,bDestroy:!0,sPaginationType:"bs_normal"};n.datatables&&n.datatables.length>0&&(a=$.extend(a,e.$eval(n.datatables))),n.columns&&(a.columns=e.$eval(n.columns)),n.sorting&&(a.aaSorting=e.$eval(n.sorting)),n.fnRowCallback&&(a.fnRowCallback=e.$eval(n.fnRowCallback));var o=t.dataTable(a),r=$(o),c=r.closest(".dataTables_wrapper").find("div[id$=_filter] input");c.attr("placeholder","Search"),c.addClass("form-control input-sm");var l=r.closest(".dataTables_wrapper").find("div[id$=_length] select");l.addClass("form-control input-sm"),r.bind("page",function(e){window.console&&console.log("pagination event:",e)}),e.$watch(n.data,function(t){var a=t||null;a&&(o.fnClearTable(),o.fnAddData(e.$eval(n.data)))},!0)}}),angular.module("webapp").directive("bsNavbar",["$location",function(e){"use strict";return{restrict:"A",link:function(t,n){t.$watch(function(){return e.path()},function(e){$("li[data-match-route]",n).each(function(t,n){var a=angular.element(n),o=a.attr("data-match-route"),r=new RegExp("^"+o+"$",["i"]);r.test(e)?a.addClass("active"):a.removeClass("active")})})}}}]),angular.module("webapp").factory("socket",["$rootScope",function(e){var t=window.io.connect(),n={};return n.join=function(e){n.emit("join",e)},n.on=function(n,a){t.on(n,function(){var n=arguments;e.$apply(function(){a.apply(t,n)})})},n.emit=function(n,a,o){t.emit(n,a,function(){var n=arguments;e.$apply(function(){o&&o.apply(t,n)})})},n}]),angular.module("webapp").controller("MongodbCtrl",["$scope","Restangular",function(e,t){var n=t.all("api/v1/Todo");n.getList().then(function(t){e.todos=t}),e["delete"]=function(t){t.remove().then(function(){e.todos=_.without(e.todos,t)})},e.save=function(e){e.put()},e.create=function(){var t={text:e.newText,done:!1};n.post(t).then(function(){e.todos.push(t)})}}]),angular.module("webapp").controller("PassportCtrl",["$scope","$http","authService",function(e,t,n){e.loggedIn=!1,n.getAccount(function(t){e.account=t,e.loggedIn=t&&t.id}),e.logout=function(){n.logout(function(){delete e.account,e.loggedIn=!1})}}]),angular.module("webapp").factory("carsProvider",[function(){return{cars:[{name:"1948 Porsche 356-A Roadster",price:53.9,category:"Classic Cars",action:"x"},{name:"1948 Porsche Type 356 Roadster",price:62.16,category:"Classic Cars",action:"x"},{name:"1949 Jaguar XK 120",price:47.25,category:"Classic Cars",action:"x"},{name:"1936 Harley Davidson El Knucklehead",price:24.23,category:"Motorcycles",action:"x"},{name:"1957 Vespa GS150",price:32.95,category:"Motorcycles",action:"x"},{name:"1960 BSA Gold Star DBD34",price:37.32,category:"Motorcycles",action:"x"},{name:"1900s Vintage Bi-Plane",price:34.25,category:"Planes",action:"x"},{name:"1900s Vintage Tri-Plane",price:36.23,category:"Planes",action:"x"},{name:"1928 British Royal Navy Airplane",price:66.74,category:"Planes",action:"x"},{name:"1980s Black Hawk Helicopter",price:77.27,category:"Planes",action:"x"},{name:"ATA: B757-300",price:59.33,category:"Planes",action:"x"}]}}]),angular.module("webapp").controller("TablesCtrl",["$scope","carsProvider","Restangular","socket",function(e,t,n,a){var o=n.all("api/v1/Todo"),r=function(e){var t=moment(e.created);e.createdTextual=t.fromNow()};o.getList().then(function(t){_.each(t,r),e.todos=t}),e.todoColumnDefs=[{data:"text"},{data:"done"},{data:"createdTextual"}],e.sorting=[[2,"desc"]],e.message="",e.myCallback=function(t,n){return $("td:eq(2)",t).bind("click",function(){e.$apply(function(){e.someClickHandler(n)})}),t},e.someClickHandler=function(t){e.message="clicked: "+t.price},e.columnDefs=[{data:"category"},{data:"name"},{data:"price"}],e.sampleProductCategories=t.cars,a.on("newTodo",function(t){e.todos.push(t)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRpYWxvZ3MvZGlhbG9ncy5qcyIsImZvcm1zL2Zvcm1zLmpzIiwiaG9tZS9ob21lLmpzIiwianMvYWxlcnQuanMiLCJqcy9hdXRoLmpzIiwianMvZGF0YXRhYmxlcy5qcyIsImpzL25hdmJhci5qcyIsImpzL3NvY2tldC5qcyIsIm1vbmdvZGIvbW9uZ29kYi5qcyIsInBhc3Nwb3J0L3Bhc3Nwb3J0LmpzIiwidGFibGVzL2NhcnNQcm92aWRlci5qcyIsInRhYmxlcy90YWJsZXMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiUmVzdGFuZ3VsYXJQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwic2V0UmVzcG9uc2VFeHRyYWN0b3IiLCJyZXNwb25zZSIsInBheWxvYWQiLCJzZXRSZXN0YW5ndWxhckZpZWxkcyIsImlkIiwiJHNjb3BlIiwiJG1vZGFsSW5zdGFuY2UiLCJpdGVtcyIsInNlbGVjdGVkIiwiaXRlbSIsIm9rIiwiY2xvc2UiLCJjYW5jZWwiLCJkaXNtaXNzIiwiYWxlcnRTZXJ2aWNlIiwiJG1vZGFsIiwic3VjY2VzcyIsIm1zZyIsImluZm8iLCJ3YXJuaW5nIiwiZXJyb3IiLCJvcGVuIiwibW9kYWxJbnN0YW5jZSIsInJlc29sdmUiLCJyZXN1bHQiLCJ0aGVuIiwic2VsZWN0ZWRJdGVtIiwiJGh0dHAiLCJiaXJ0aERhdGUiLCJEYXRlIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInNleCIsInBvc3NpYmxlSW50ZXJlc3RzIiwic2VsZWN0ZWRJbnRlcmVzdHMiLCIkZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIm9wZW5lZCIsImZvcm1hdCIsImdldCIsImRhdGEiLCJiYWNrZ3JvdW5kcyIsIndpbmRvdyIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwiJCIsImNzcyIsInRvQXJyYXkiLCJvYmoiLCJyZXQiLCJrZXkiLCJwdXNoIiwibmFtZSIsInZhbHVlIiwiZGVwZW5kZW5jaWVzIiwiZGV2RGVwZW5kZW5jaWVzIiwic2VydmVyIiwiY2xpZW50IiwiZmFjdG9yeSIsIm1lIiwidG9hc3RyIiwicHJvbWlzZSIsImdldEFjY291bnQiLCJuZXh0IiwibG9nb3V0IiwiZGlyZWN0aXZlIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJvcHRpb25zIiwiYlN0YXRlU2F2ZSIsImJKUXVlcnlVSSIsImJQYWdpbmF0ZSIsImJMZW5ndGhDaGFuZ2UiLCJiRmlsdGVyIiwiYkluZm8iLCJiRGVzdHJveSIsInNQYWdpbmF0aW9uVHlwZSIsImRhdGF0YWJsZXMiLCJsZW5ndGgiLCJleHRlbmQiLCIkZXZhbCIsImNvbHVtbnMiLCJzb3J0aW5nIiwiYWFTb3J0aW5nIiwiZm5Sb3dDYWxsYmFjayIsImRhdGFUYWJsZSIsIiRkYXRhVGFibGUiLCJzZWFyY2hfaW5wdXQiLCJjbG9zZXN0IiwiZmluZCIsImF0dHIiLCJhZGRDbGFzcyIsImxlbmd0aF9zZWwiLCJiaW5kIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJ2YWwiLCJmbkNsZWFyVGFibGUiLCJmbkFkZERhdGEiLCIkbG9jYXRpb24iLCJyZXN0cmljdCIsImxpbmsiLCJwYXRoIiwiZWFjaCIsImsiLCJsaSIsIiRsaSIsInBhdHRlcm4iLCJyZWdleHAiLCJSZWdFeHAiLCJ0ZXN0IiwicmVtb3ZlQ2xhc3MiLCIkcm9vdFNjb3BlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwiam9pbiIsInJvb20iLCJlbWl0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCIkYXBwbHkiLCJhcHBseSIsIlJlc3Rhbmd1bGFyIiwidG9kb0FwaSIsImFsbCIsImdldExpc3QiLCJ0b2RvcyIsInRvZG8iLCJyZW1vdmUiLCJfIiwid2l0aG91dCIsInNhdmUiLCJwdXQiLCJjcmVhdGUiLCJuZXdUb2RvIiwidGV4dCIsIm5ld1RleHQiLCJkb25lIiwicG9zdCIsImF1dGhTZXJ2aWNlIiwibG9nZ2VkSW4iLCJhY2NvdW50IiwiY2FycyIsInByaWNlIiwiY2F0ZWdvcnkiLCJhY3Rpb24iLCJjYXJzUHJvdmlkZXIiLCJmb3JtYXRUb2RvIiwibSIsIm1vbWVudCIsImNyZWF0ZWQiLCJjcmVhdGVkVGV4dHVhbCIsImZyb21Ob3ciLCJ0b2RvQ29sdW1uRGVmcyIsIm1lc3NhZ2UiLCJteUNhbGxiYWNrIiwiblJvdyIsImFEYXRhIiwic29tZUNsaWNrSGFuZGxlciIsImNvbHVtbkRlZnMiLCJzYW1wbGVQcm9kdWN0Q2F0ZWdvcmllcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQ0FDLE9BQUEsVUFBQSxVQUFBLGNBQUEsaUJBQ0FDLFFBQ0EsaUJBQUEsc0JBQ0EsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxLQUVBQyxZQUFBLGlCQUNBQyxXQUFBLGFBRUFGLEtBQUEsVUFFQUMsWUFBQSxtQkFDQUMsV0FBQSxjQUVBRixLQUFBLFlBRUFDLFlBQUEsdUJBQ0FDLFdBQUEsZ0JBRUFGLEtBQUEsV0FFQUMsWUFBQSxxQkFDQUMsV0FBQSxlQUVBRixLQUFBLFlBRUFDLFlBQUEsdUJBQ0FDLFdBQUEsZ0JBRUFGLEtBQUEsYUFFQUMsWUFBQSx5QkFDQUMsV0FBQSxpQkFFQUYsS0FBQSxVQUVBQyxZQUFBLHFCQUdBRSxXQUVBQyxXQUFBLE1BRUFMLEVBQUFNLHFCQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsVUFFQVIsRUFBQVMsc0JBQ0FDLEdBQUEsV0NqREFkLFFBQUFDLE9BQUEsVUFBQU0sV0FDQSxxQkFFQSxTQUNBLGlCQUNBLFFBQ0EsU0FBQVEsRUFBQUMsRUFBQUMsR0FFQUYsRUFBQUUsTUFBQUEsRUFDQUYsRUFBQUcsVUFDQUMsS0FBQUosRUFBQUUsTUFBQSxJQUdBRixFQUFBSyxHQUFBLFdBQ0FKLEVBQUFLLE1BQUFOLEVBQUFHLFNBQUFDLE9BR0FKLEVBQUFPLE9BQUEsV0FDQU4sRUFBQU8sUUFBQSxjQUtBdkIsUUFBQUMsT0FB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QSxTQUNBLFNBQUFRLEVBQUFxSixFQUFBeEIsRUFBQWIsR0FDQSxHQUFBYyxHQUFBRCxFQUFBRSxJQUFBLGVBRUF1QixFQUFBLFNBQUFwQixHQUNBLEdBQUFxQixHQUFBQyxPQUFBdEIsRUFBQXVCLFFBQ0F2QixHQUFBd0IsZUFBQUgsRUFBQUksVUFHQTdCLEdBQUFFLFVBQUE1RyxLQUFBLFNBQUE2RyxHQUNBRyxFQUFBOUIsS0FBQTJCLEVBQUFxQixHQUNBdEosRUFBQWlJLE1BQUFBLElBRUFqSSxFQUFBNEosaUJBQ0F2SCxLQUFBLFNBQ0FBLEtBQUEsU0FDQUEsS0FBQSxtQkFFQXJDLEVBQUFnRixVQUFBLEVBQUEsU0FFQWhGLEVBQUE2SixRQUFBLEdBRUE3SixFQUFBOEosV0FBQSxTQUFBQyxFQUFBQyxHQU1BLE1BTEF0SCxHQUFBLFdBQUFxSCxHQUFBcEUsS0FBQSxRQUFBLFdBQ0EzRixFQUFBMkgsT0FBQSxXQUNBM0gsRUFBQWlLLGlCQUFBRCxPQUdBRCxHQUdBL0osRUFBQWlLLGlCQUFBLFNBQUFwSixHQUNBYixFQUFBNkosUUFBQSxZQUFBaEosRUFBQXFJLE9BRUFsSixFQUFBa0ssYUFDQTdILEtBQUEsYUFDQUEsS0FBQSxTQUNBQSxLQUFBLFVBR0FyQyxFQUFBbUssd0JBQUFkLEVBQUFKLEtBQ0FqQyxFQUFBTSxHQUFBLFVBQUEsU0FBQVksR0FDQWxJLEVBQUFpSSxNQUFBakYsS0FBQWtGIiwiZmlsZSI6ImNsaWVudC9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gIC5tb2R1bGUoJ3dlYmFwcCcsIFsnbmdSb3V0ZScsICdyZXN0YW5ndWxhcicsICd1aS5ib290c3RyYXAnXSlcbiAgLmNvbmZpZyhcbiAgWyckcm91dGVQcm92aWRlcicsICdSZXN0YW5ndWxhclByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlciwgUmVzdGFuZ3VsYXJQcm92aWRlcikge1xuICAgICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgIHdoZW4oJy8nLFxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsJ1xuICAgICAgICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvZm9ybXMnLFxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Zvcm1zL2Zvcm1zLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGb3Jtc0N0cmwnXG4gICAgICAgICAgICAgfSkuXG4gICAgICAgIHdoZW4oJy9kaWFsb2dzJyxcbiAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkaWFsb2dzL2RpYWxvZ3MuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0RpYWxvZ3NDdHJsJ1xuICAgICAgICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvdGFibGVzJyxcbiAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0YWJsZXMvdGFibGVzLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUYWJsZXNDdHJsJ1xuICAgICAgICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvbW9uZ29kYicsXG4gICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbW9uZ29kYi9tb25nb2RiLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNb25nb2RiQ3RybCdcbiAgICAgICAgICAgICB9KS5cbiAgICAgICAgd2hlbignL3Bhc3Nwb3J0JyxcbiAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXNzcG9ydC9wYXNzcG9ydC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUGFzc3BvcnRDdHJsJ1xuICAgICAgICAgICAgIH0pLlxuICAgICAgICB3aGVuKCcvYWJvdXQnLFxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Fib3V0L2Fib3V0Lmh0bWwnLFxuICAgICAgICAgICAgICAgIC8vY29udHJvbGxlcjogJ0Fib3V0Q3RybCdcbiAgICAgICAgICAgICB9KS5cbiAgICAgICAgb3RoZXJ3aXNlKFxuICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgICAgICB9KTtcbiAgICAgIFJlc3Rhbmd1bGFyUHJvdmlkZXIuc2V0UmVzcG9uc2VFeHRyYWN0b3IoZnVuY3Rpb24ocmVzcG9uc2UsIG9wZXJhdGlvbiwgd2hhdCwgdXJsKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5wYXlsb2FkO1xuICAgICAgfSk7XG4gICAgICBSZXN0YW5ndWxhclByb3ZpZGVyLnNldFJlc3Rhbmd1bGFyRmllbGRzKHtcbiAgICAgICAgaWQ6IFwiX2lkXCIsXG4gICAgICB9KTtcbiAgICB9XG5dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWJhcHAnKS5jb250cm9sbGVyKFxuICAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuICBbXG4gICAgJyRzY29wZScsXG4gICAgJyRtb2RhbEluc3RhbmNlJyxcbiAgICAnaXRlbXMnLFxuICAgIGZ1bmN0aW9uIE1vZGFsSW5zdGFuY2VDdHJsKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIGl0ZW1zKSB7XG5cbiAgICAgICRzY29wZS5pdGVtcyA9IGl0ZW1zO1xuICAgICAgJHNjb3BlLnNlbGVjdGVkID0ge1xuICAgICAgICBpdGVtOiAkc2NvcGUuaXRlbXNbMF1cbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgICB9O1xuICAgIH1dXG4pO1xuXG5hbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuY29udHJvbGxlcihcbiAgJ0RpYWxvZ3NDdHJsJyxcbiAgW1xuICAgICckc2NvcGUnLFxuICAgICdhbGVydFNlcnZpY2UnLFxuICAgICckbW9kYWwnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgYWxlcnRTZXJ2aWNlLCAkbW9kYWwpIHtcbiAgICAgICRzY29wZS5zdWNjZXNzID0gZnVuY3Rpb24obXNnKSB7XG4gICAgICAgIGFsZXJ0U2VydmljZS5zdWNjZXNzKG1zZyk7XG4gICAgICB9O1xuICAgICAgJHNjb3BlLmluZm8gPSBmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgYWxlcnRTZXJ2aWNlLmluZm8obXNnKTtcbiAgICAgIH07XG4gICAgICAkc2NvcGUud2FybmluZyA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICBhbGVydFNlcnZpY2Uud2FybmluZyhtc2cpO1xuICAgICAgfTtcbiAgICAgICRzY29wZS5lcnJvciA9IGZ1bmN0aW9uKG1zZykge1xuICAgICAgICBhbGVydFNlcnZpY2UuZXJyb3IobXNnKTtcbiAgICAgIH07XG4gICAgICAkc2NvcGUuaXRlbXMgPSBbJ0NodWNrIE5vcnJpcycsICdKZWFuIENsYXVkZSBWYW4gRGFtbWUnLCAnQnJ1Y2UgV2lsbGlzJywgJ0Fybm9sZCBTY2h3YXJ6ZW5lZ2dlciddO1xuICAgICAgJHNjb3BlLnNlbGVjdGVkID0gJHNjb3BlLml0ZW1zWzBdO1xuXG4gICAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdteU1vZGFsQ29udGVudCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcbiAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBpdGVtczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLml0ZW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuICAgICAgICAgICRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcbiAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgIH07XG4gICAgfVxuICBdXG4pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuY29udHJvbGxlcihcbiAgJ0Zvcm1zQ3RybCcsIFxuICBbXG4gICAgJyRzY29wZScsIFxuICAgICckaHR0cCcsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuICAgICAgJHNjb3BlLmJpcnRoRGF0ZSA9IG5ldyBEYXRlKDE5NzUsIDAsIDI5KTtcbiAgICAgICRzY29wZS5maXJzdE5hbWUgPSAnVGhvbWFzJztcbiAgICAgICRzY29wZS5sYXN0TmFtZSA9ICdIYXVrbGFuZCc7XG4gICAgICAkc2NvcGUuZW1haWwgPSAndGhvbWFzLmhhdWtsYW5kQGdtYWlsLmNvbSc7XG4gICAgICAkc2NvcGUuc2V4ID0gJ21hbGUnO1xuXG4gICAgICAkc2NvcGUucG9zc2libGVJbnRlcmVzdHMgPSBbXG4gICAgICAgICdzb2NjZXInLCAnYmlsbGlhcmRzJywgJ3BpbmcgcG9uZycsXG4gICAgICAgICd0dicsICdicmlkZ2UnLCAncnVubmluZycsICdqdW5rIGZvb2QnXG4gICAgICBdO1xuXG4gICAgICAkc2NvcGUuc2VsZWN0ZWRJbnRlcmVzdHMgPSB7fTtcblxuICAgICAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAkc2NvcGUub3BlbmVkID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICAkc2NvcGUuZm9ybWF0ID0gJ3l5eXktTU0tZGQnO1xuXG4gICAgICAkaHR0cC5nZXQoJy9hcGkvYmFja2dyb3VuZHMnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLmJhY2tncm91bmRzID0gZGF0YTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGb3IgZGVidWdnaW5nIG9ubHk6XG4gICAgICB3aW5kb3cuZGF0YSA9ICRzY29wZTtcblxuICAgICAgJHNjb3BlLiR3YXRjaCgnc2VsZWN0ZWRCYWNrZ3JvdW5kJywgZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgJCgnaHRtbCcpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoL2Fzc2V0cy9pbWcvYmFja2dyb3VuZHMvJyArIG5ld1ZhbHVlICsgJyknKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICBdXG4pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuY29udHJvbGxlcihcbiAgJ0hvbWVDdHJsJywgXG4gIFtcbiAgICAnJHNjb3BlJywgXG4gICAgJyRodHRwJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG4gICAgICBmdW5jdGlvbiB0b0FycmF5KG9iaikge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICByZXQucHVzaCh7bmFtZToga2V5LCB2YWx1ZTogb2JqW2tleV19KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICAgICRodHRwLmdldCgnaG9tZS9wYWNrYWdlLmpzb24nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHsgICAgICAgIFxuICAgICAgICBkYXRhLmRlcGVuZGVuY2llcyA9IHRvQXJyYXkoZGF0YS5kZXBlbmRlbmNpZXMpO1xuICAgICAgICBkYXRhLmRldkRlcGVuZGVuY2llcyA9IHRvQXJyYXkoZGF0YS5kZXZEZXBlbmRlbmNpZXMpO1xuICAgICAgICAkc2NvcGUuc2VydmVyID0gZGF0YTtcbiAgICAgIH0pO1xuICAgICAgJGh0dHAuZ2V0KCdob21lL2Jvd2VyLmpzb24nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZGF0YS5kZXBlbmRlbmNpZXMgPSB0b0FycmF5KGRhdGEuZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgZGF0YS5kZXZEZXBlbmRlbmNpZXMgPSB0b0FycmF5KGRhdGEuZGV2RGVwZW5kZW5jaWVzKTtcbiAgICAgICAgJHNjb3BlLmNsaWVudCA9IGRhdGE7XG4gICAgICB9KTtcbiAgICB9XG4gIF1cbik7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWJhcHAnKS5mYWN0b3J5KFxuICAnYWxlcnRTZXJ2aWNlJywgXG4gIFtcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtZSA9IHt9O1xuICAgICAgbWUuc3VjY2VzcyA9IHRvYXN0ci5zdWNjZXNzO1xuICAgICAgbWUuaW5mbyA9IHRvYXN0ci5pbmZvO1xuICAgICAgbWUud2FybmluZyA9IHRvYXN0ci53YXJuaW5nO1xuICAgICAgbWUuZXJyb3IgPSB0b2FzdHIuZXJyb3I7XG4gICAgICByZXR1cm4gbWU7XG4gICAgfVxuICBdXG4pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuZmFjdG9yeShcbiAgJ2F1dGhTZXJ2aWNlJywgXG4gIFtcbiAgICAnJGh0dHAnLCBcbiAgICBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgdmFyIG1lID0ge307XG5cbiAgICAgIHZhciBwcm9taXNlID0gJGh0dHAuZ2V0KCcvYXV0aC9hY2NvdW50Jyk7XG5cbiAgICAgIG1lLmdldEFjY291bnQgPSBmdW5jdGlvbihuZXh0KSB7XG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICBuZXh0KHJlc3VsdC5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBtZS5sb2dvdXQgPSBmdW5jdGlvbihuZXh0KSB7XG4gICAgICAgICRodHRwLmdldCgnL2F1dGgvbG9nb3V0JykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBwcm9taXNlID0gJGh0dHAuZ2V0KCcvYXV0aC9hY2NvdW50Jyk7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBtZTtcbiAgICB9XG4gIF1cbik7XG5cbiIsIi8vIE5pY2tlZCBmcm9tOlxuLy8gaHR0cDovL2pzZmlkZGxlLm5ldC96ZGFtLzdrTEZVL1xuLy8gQWRkZWQgc29tIEJTIHN0eWxpbmcgb2Ygc2VhcmNoIGZpZWxkXG5hbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuZGlyZWN0aXZlKFxuICAnZGF0YXRhYmxlcycsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgLy8gYXBwbHkgRGF0YVRhYmxlIG9wdGlvbnMsIHVzZSBkZWZhdWx0cyBpZiBub25lIHNwZWNpZmllZCBieSB1c2VyXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIFwiYlN0YXRlU2F2ZVwiOiBmYWxzZSxcbiAgICAgICAgLy9cImlDb29raWVEdXJhdGlvblwiOiAyNDE5MjAwLCAvKiAxIG1vbnRoICovXG4gICAgICAgIFwiYkpRdWVyeVVJXCI6IGZhbHNlLFxuICAgICAgICBcImJQYWdpbmF0ZVwiOiB0cnVlLFxuICAgICAgICBcImJMZW5ndGhDaGFuZ2VcIjogdHJ1ZSxcbiAgICAgICAgXCJiRmlsdGVyXCI6IHRydWUsXG4gICAgICAgIFwiYkluZm9cIjogdHJ1ZSxcbiAgICAgICAgXCJiRGVzdHJveVwiOiB0cnVlLFxuICAgICAgICBcInNQYWdpbmF0aW9uVHlwZVwiOiBcImJzX25vcm1hbFwiXG4gICAgfTtcbiAgICBpZiAoYXR0cnMuZGF0YXRhYmxlcyAmJiBhdHRycy5kYXRhdGFibGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wdGlvbnMgPSAgJC5leHRlbmQob3B0aW9ucyxzY29wZS4kZXZhbChhdHRycy5kYXRhdGFibGVzKSk7XG4gICAgfVxuICAgIGlmIChhdHRycy5jb2x1bW5zKSB7XG4gICAgICBvcHRpb25zLmNvbHVtbnMgPSBzY29wZS4kZXZhbChhdHRycy5jb2x1bW5zKTtcbiAgICB9XG4gICAgaWYgKGF0dHJzLnNvcnRpbmcpIHtcbiAgICAgIG9wdGlvbnMuYWFTb3J0aW5nID0gc2NvcGUuJGV2YWwoYXR0cnMuc29ydGluZyk7XG4gICAgfVxuICAgIGlmIChhdHRycy5mblJvd0NhbGxiYWNrKSB7XG4gICAgICBvcHRpb25zLmZuUm93Q2FsbGJhY2sgPSBzY29wZS4kZXZhbChhdHRycy5mblJvd0NhbGxiYWNrKTtcbiAgICB9XG4gICAgLy9hcHBseSB0aGUgcGx1Z2luXG4gICAgdmFyIGRhdGFUYWJsZSA9IGVsZW1lbnQuZGF0YVRhYmxlKG9wdGlvbnMpO1xuXG4gICAgdmFyICRkYXRhVGFibGUgPSAkKGRhdGFUYWJsZSk7XG4gICAgLy8gU0VBUkNIIC0gQWRkIHRoZSBwbGFjZWhvbGRlciBmb3IgU2VhcmNoIGFuZCBUdXJuIHRoaXMgaW50byBpbi1saW5lIGZvcm0gY29udHJvbFxuICAgIHZhciBzZWFyY2hfaW5wdXQgPSAkZGF0YVRhYmxlLmNsb3Nlc3QoJy5kYXRhVGFibGVzX3dyYXBwZXInKS5maW5kKCdkaXZbaWQkPV9maWx0ZXJdIGlucHV0Jyk7XG4gICAgc2VhcmNoX2lucHV0LmF0dHIoJ3BsYWNlaG9sZGVyJywgJ1NlYXJjaCcpO1xuICAgIHNlYXJjaF9pbnB1dC5hZGRDbGFzcygnZm9ybS1jb250cm9sIGlucHV0LXNtJyk7XG4gICAgLy8gTEVOR1RIIC0gSW5saW5lLUZvcm0gY29udHJvbFxuICAgIHZhciBsZW5ndGhfc2VsID0gJGRhdGFUYWJsZS5jbG9zZXN0KCcuZGF0YVRhYmxlc193cmFwcGVyJykuZmluZCgnZGl2W2lkJD1fbGVuZ3RoXSBzZWxlY3QnKTtcbiAgICBsZW5ndGhfc2VsLmFkZENsYXNzKCdmb3JtLWNvbnRyb2wgaW5wdXQtc20nKTtcbiAgICAkZGF0YVRhYmxlLmJpbmQoJ3BhZ2UnLCBmdW5jdGlvbihlKXtcbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSkgY29uc29sZS5sb2coJ3BhZ2luYXRpb24gZXZlbnQ6JywgZSk7IC8vdGhpcyBldmVudCBtdXN0IGJlIGZpcmVkIHdoZW5ldmVyIHlvdSBwYWdpbmF0ZVxuICAgIH0pO1xuXG4gICAgLy93YXRjaCBmb3IgYW55IGNoYW5nZXMgdG8gb3VyIGRhdGEsIHJlYnVpbGQgdGhlIERhdGFUYWJsZVxuICAgIHNjb3BlLiR3YXRjaChhdHRycy5kYXRhLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIHZhbCA9IHZhbHVlIHx8IG51bGw7XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIGRhdGFUYWJsZS5mbkNsZWFyVGFibGUoKTtcbiAgICAgICAgZGF0YVRhYmxlLmZuQWRkRGF0YShzY29wZS4kZXZhbChhdHRycy5kYXRhKSk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gIH07XG59KTtcblxuIiwiLy8gTmlja2luZyB0aGUgYnNOYXZiYXIgZGlyZWN0aXZlIGZyb20gYW5ndWxhciBzdHJhcFxuLy8gKG9ubHkgMSBuZWVkZWQgbm90IGluIGFuZ3VsYXIudWkpXG5hbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuZGlyZWN0aXZlKCdic05hdmJhcicsIFxuICBbJyRsb2NhdGlvbicsXG4gIGZ1bmN0aW9uKCRsb2NhdGlvbikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcikge1xuICAgICAgLy8gV2F0Y2ggZm9yIHRoZSAkbG9jYXRpb25cbiAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRsb2NhdGlvbi5wYXRoKCk7XG4gICAgICB9LCBmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcblxuICAgICAgICAkKCdsaVtkYXRhLW1hdGNoLXJvdXRlXScsIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaywgbGkpIHtcbiAgICAgICAgICB2YXIgJGxpID0gYW5ndWxhci5lbGVtZW50KGxpKSxcbiAgICAgICAgICAvLyBkYXRhKCdtYXRjaC1yb3V0JykgZG9lcyBub3Qgd29yayB3aXRoIGR5bmFtaWMgYXR0cmlidXRlc1xuICAgICAgICAgIHBhdHRlcm4gPSAkbGkuYXR0cignZGF0YS1tYXRjaC1yb3V0ZScpLFxuICAgICAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJ14nICsgcGF0dGVybiArICckJywgWydpJ10pO1xuXG4gICAgICAgICAgaWYocmVnZXhwLnRlc3QobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAkbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbGkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWJhcHAnKS5mYWN0b3J5KCdzb2NrZXQnLCBbJyRyb290U2NvcGUnLFxuZnVuY3Rpb24oJHJvb3RTY29wZSwgJHJvdXRlUGFyYW1zKSB7XG4gICAgdmFyIHNvY2tldCA9IHdpbmRvdy5pby5jb25uZWN0KCk7XG4gICAgdmFyIG1lID0ge307XG4gICAgbWUuam9pbiA9IGZ1bmN0aW9uKHJvb20pIHtcbiAgICAgICAgbWUuZW1pdCgnam9pbicsIHJvb20pO1xuICAgIH07XG4gICAgbWUub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgbWUuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIG1lO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3dlYmFwcCcpLmNvbnRyb2xsZXIoXG4gICdNb25nb2RiQ3RybCcsIFxuICBbXG4gICAgJyRzY29wZScsIFxuICAgICdSZXN0YW5ndWxhcicsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCBSZXN0YW5ndWxhcikge1xuICAgICAgdmFyIHRvZG9BcGkgPSBSZXN0YW5ndWxhci5hbGwoJ2FwaS92MS9Ub2RvJyk7XG5cbiAgICAgIHRvZG9BcGkuZ2V0TGlzdCgpLnRoZW4oZnVuY3Rpb24odG9kb3MpIHtcbiAgICAgICAgJHNjb3BlLnRvZG9zID0gdG9kb3M7XG4gICAgICB9KTtcblxuICAgICAgJHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uKHRvZG8pIHtcbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gcmVzdC1hcGlcbiAgICAgICAgdG9kby5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIGNsaWVudHNpZGUgYXJyYXlcbiAgICAgICAgICAkc2NvcGUudG9kb3MgPSBfLndpdGhvdXQoJHNjb3BlLnRvZG9zLCB0b2RvKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKHRvZG8pIHtcbiAgICAgICAgdG9kby5wdXQoKTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5ld1RvZG8gPSB7dGV4dDogJHNjb3BlLm5ld1RleHQsIGRvbmU6IGZhbHNlfTtcbiAgICAgICAgLy8gQWRkIHRvIHJlc3QtYXBpXG4gICAgICAgIHRvZG9BcGkucG9zdChuZXdUb2RvKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIEFkZCB0byBjbGllbnRzaWRlIGFycmF5XG4gICAgICAgICAgJHNjb3BlLnRvZG9zLnB1c2gobmV3VG9kbyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIF1cbik7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWJhcHAnKS5jb250cm9sbGVyKFxuICAnUGFzc3BvcnRDdHJsJywgXG4gIFtcbiAgICAnJHNjb3BlJywgXG4gICAgJyRodHRwJyxcbiAgICAnYXV0aFNlcnZpY2UnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlKSB7XG5cbiAgICAgICRzY29wZS5sb2dnZWRJbiA9IGZhbHNlO1xuXG4gICAgICBhdXRoU2VydmljZS5nZXRBY2NvdW50KGZ1bmN0aW9uKGFjY291bnQpIHtcbiAgICAgICAgJHNjb3BlLmFjY291bnQgPSBhY2NvdW50O1xuICAgICAgICAkc2NvcGUubG9nZ2VkSW4gPSBhY2NvdW50ICYmIGFjY291bnQuaWQ7XG4gICAgICB9KTtcblxuICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGVsZXRlICRzY29wZS5hY2NvdW50O1xuICAgICAgICAgICRzY29wZS5sb2dnZWRJbiA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICBdXG4pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnd2ViYXBwJykuZmFjdG9yeShcbiAgJ2NhcnNQcm92aWRlcicsXG4gIFtcbiAgICBmdW5jdGlvbiBjYXJzUHJvdmlkZXIoKSB7XG4gICAgICByZXR1cm4geyBjYXJzOlxuICAgICAgW1xuICAgICAge1xuICAgICAgICBcIm5hbWVcIjogXCIxOTQ4IFBvcnNjaGUgMzU2LUEgUm9hZHN0ZXJcIixcbiAgICAgICAgXCJwcmljZVwiOiA1My45LFxuICAgICAgICBcImNhdGVnb3J5XCI6IFwiQ2xhc3NpYyBDYXJzXCIsXG4gICAgICAgIFwiYWN0aW9uXCI6XCJ4XCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwibmFtZVwiOiBcIjE5NDggUG9yc2NoZSBUeXBlIDM1NiBSb2Fkc3RlclwiLFxuICAgICAgICBcInByaWNlXCI6IDYyLjE2LFxuICAgICAgICBcImNhdGVnb3J5XCI6IFwiQ2xhc3NpYyBDYXJzXCIsXG4gICAgICAgIFwiYWN0aW9uXCI6XCJ4XCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwibmFtZVwiOiBcIjE5NDkgSmFndWFyIFhLIDEyMFwiLFxuICAgICAgICBcInByaWNlXCI6IDQ3LjI1LFxuICAgICAgICBcImNhdGVnb3J5XCI6IFwiQ2xhc3NpYyBDYXJzXCIsXG4gICAgICAgIFwiYWN0aW9uXCI6XCJ4XCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwibmFtZVwiOiBcIjE5MzYgSGFybGV5IERhdmlkc29uIEVsIEtudWNrbGVoZWFkXCIsXG4gICAgICAgIFwicHJpY2VcIjogMjQuMjMsXG4gICAgICAgIFwiY2F0ZWdvcnlcIjogXCJNb3RvcmN5Y2xlc1wiLFxuICAgICAgICBcImFjdGlvblwiOlwieFwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcIm5hbWVcIjogXCIxOTU3IFZlc3BhIEdTMTUwXCIsXG4gICAgICAgIFwicHJpY2VcIjogMzIuOTUsXG4gICAgICAgIFwiY2F0ZWdvcnlcIjogXCJNb3RvcmN5Y2xlc1wiLFxuICAgICAgICBcImFjdGlvblwiOlwieFwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcIm5hbWVcIjogXCIxOTYwIEJTQSBHb2xkIFN0YXIgREJEMzRcIixcbiAgICAgICAgXCJwcmljZVwiOiAzNy4zMixcbiAgICAgICAgXCJjYXRlZ29yeVwiOiBcIk1vdG9yY3ljbGVzXCIsXG4gICAgICAgIFwiYWN0aW9uXCI6XCJ4XCJcbiAgICAgIH0gLFxuICAgICAge1xuICAgICAgICBcIm5hbWVcIjogXCIxOTAwcyBWaW50YWdlIEJpLVBsYW5lXCIsXG4gICAgICAgIFwicHJpY2VcIjogMzQuMjUsXG4gICAgICAgIFwiY2F0ZWdvcnlcIjogXCJQbGFuZXNcIixcbiAgICAgICAgXCJhY3Rpb25cIjpcInhcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJuYW1lXCI6IFwiMTkwMHMgVmludGFnZSBUcmktUGxhbmVcIixcbiAgICAgICAgXCJwcmljZVwiOiAzNi4yMyxcbiAgICAgICAgXCJjYXRlZ29yeVwiOiBcIlBsYW5lc1wiLFxuICAgICAgICBcImFjdGlvblwiOlwieFwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcIm5hbWVcIjogXCIxOTI4IEJyaXRpc2ggUm95YWwgTmF2eSBBaXJwbGFuZVwiLFxuICAgICAgICBcInByaWNlXCI6IDY2Ljc0LFxuICAgICAgICBcImNhdGVnb3J5XCI6IFwiUGxhbmVzXCIsXG4gICAgICAgIFwiYWN0aW9uXCI6XCJ4XCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwibmFtZVwiOiBcIjE5ODBzIEJsYWNrIEhhd2sgSGVsaWNvcHRlclwiLFxuICAgICAgICBcInByaWNlXCI6IDc3LjI3LFxuICAgICAgICBcImNhdGVnb3J5XCI6IFwiUGxhbmVzXCIsXG4gICAgICAgIFwiYWN0aW9uXCI6XCJ4XCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwibmFtZVwiOiBcIkFUQTogQjc1Ny0zMDBcIixcbiAgICAgICAgXCJwcmljZVwiOiA1OS4zMyxcbiAgICAgICAgXCJjYXRlZ29yeVwiOiBcIlBsYW5lc1wiLFxuICAgICAgICBcImFjdGlvblwiOlwieFwiXG4gICAgICB9XG5cbiAgICAgIF1cbiAgICB9O1xuICB9XG4gIF1cbik7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWJhcHAnKS5jb250cm9sbGVyKFxuICAnVGFibGVzQ3RybCcsXG4gIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnY2Fyc1Byb3ZpZGVyJyxcbiAgICAnUmVzdGFuZ3VsYXInLFxuICAgICdzb2NrZXQnLFxuICAgIGZ1bmN0aW9uIFRhYmxlQ3RybCgkc2NvcGUsIGNhcnNQcm92aWRlciwgUmVzdGFuZ3VsYXIsIHNvY2tldCkge1xuICAgICAgdmFyIHRvZG9BcGkgPSBSZXN0YW5ndWxhci5hbGwoJ2FwaS92MS9Ub2RvJyk7XG5cbiAgICAgIHZhciBmb3JtYXRUb2RvID0gZnVuY3Rpb24odG9kbykge1xuICAgICAgICB2YXIgbSA9IG1vbWVudCh0b2RvLmNyZWF0ZWQpO1xuICAgICAgICB0b2RvLmNyZWF0ZWRUZXh0dWFsID0gbS5mcm9tTm93KCk7XG4gICAgICB9O1xuXG4gICAgICB0b2RvQXBpLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uKHRvZG9zKSB7XG4gICAgICAgIF8uZWFjaCh0b2RvcywgZm9ybWF0VG9kbyk7XG4gICAgICAgICRzY29wZS50b2RvcyA9IHRvZG9zO1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUudG9kb0NvbHVtbkRlZnMgPSBbIFxuICAgICAgICB7IFwiZGF0YVwiOiBcInRleHRcIn0sXG4gICAgICAgIHsgXCJkYXRhXCI6IFwiZG9uZVwiIH0sXG4gICAgICAgIHsgXCJkYXRhXCI6IFwiY3JlYXRlZFRleHR1YWxcIiB9XG4gICAgICBdOyBcbiAgICAgICRzY29wZS5zb3J0aW5nID0gW1syLCAnZGVzYyddXTtcblxuICAgICAgJHNjb3BlLm1lc3NhZ2UgPSAnJztcblxuICAgICAgJHNjb3BlLm15Q2FsbGJhY2sgPSBmdW5jdGlvbihuUm93LCBhRGF0YSwgaURpc3BsYXlJbmRleCwgaURpc3BsYXlJbmRleEZ1bGwpIHsgICAgICAgICAgICBcbiAgICAgICAgJCgndGQ6ZXEoMiknLCBuUm93KS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc29tZUNsaWNrSGFuZGxlcihhRGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gblJvdztcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5zb21lQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oaW5mbykge1xuICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICdjbGlja2VkOiAnKyBpbmZvLnByaWNlO1xuICAgICAgfTtcbiAgICAgICRzY29wZS5jb2x1bW5EZWZzID0gWyBcbiAgICAgICAgeyBcImRhdGFcIjogXCJjYXRlZ29yeVwifSxcbiAgICAgICAgeyBcImRhdGFcIjogXCJuYW1lXCIgfSxcbiAgICAgICAgeyBcImRhdGFcIjogXCJwcmljZVwiIH1cbiAgICAgIF07IFxuXG4gICAgICAkc2NvcGUuc2FtcGxlUHJvZHVjdENhdGVnb3JpZXMgPSBjYXJzUHJvdmlkZXIuY2FycztcbiAgICAgIHNvY2tldC5vbignbmV3VG9kbycsIGZ1bmN0aW9uKHRvZG8pIHtcbiAgICAgICAgJHNjb3BlLnRvZG9zLnB1c2godG9kbyk7XG4gICAgICB9KTtcbiAgICB9XG4gIF1cbik7XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==